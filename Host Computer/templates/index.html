<!DOCTYPE html>
<html>
  <head>
    <title>Sensor Data</title>
    <div id="data-container"></div>
    <script>
        // define a function to update the data on the page
        function updateData(data) {
            // get the data container element
            var container = document.getElementById("data-container");
            // clear the contents of the container
            container.innerHTML = "";
            // create a new table element to display the data
            var table = document.createElement("table");
            // add a header row to the table
            var headerRow = table.insertRow();
            for (var key in data) {
                var headerCell = headerRow.insertCell();
                headerCell.textContent = key;
            }
            // add a data row to the table
            var dataRow = table.insertRow();
            for (var key in data) {
                var dataCell = dataRow.insertCell();
                dataCell.textContent = data[key];
            }
            // add the table to the container
            container.appendChild(table);
        }
        // define a function to fetch new data and update the page
        function fetchData() {
            fetch("/data")
                .then(response => response.json())
                .then(data => updateData(data))
                .catch(error => console.error(error));
        }
        // call the fetchData function initially to display the initial data
        fetchData();
        // set an interval to call the fetchData function every 5 seconds
        setInterval(fetchData, 5000);
    </script>
    
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th, td {
        text-align: left;
        padding: 8px;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <h1>Sensor Data</h1>
    <table>
      <tr>
        <th>Humidity (%)</th>
        <td>{{ humidity }}</td>
      </tr>
      <tr>
        <th>Luminosity</th>
        <td>{{ luminosity }}</td>
      </tr>

      <tr>
        <th>Temperature (Surface *C)</th>
        <td>{{ temperature_surface }}</td>
      </tr>
      <tr>
        <th>Temperature (Middle *C)</th>
        <td>{{ temperature_middle }}</td>
      </tr>
      <tr>
        <th>Temperature (Bottom *C)</th>
        <td>{{ temperature_bottom }}</td>
      </tr>
      
      <tr>
        <th>V0 - REF</th>
        <td>{{ v0 }}</td>
      </tr>
      <tr>
        <th>V1</th>
        <td>{{ v1 }}</td>
      </tr>
      <tr>
        <th>V2</th>
        <td>{{ v2 }}</td>
      </tr>
      <tr>
        <th>V3</th>
        <td>{{ v3 }}</td>
      </tr>
      <tr>
        <th>V4</th>
        <td>{{ v4 }}</td>
      </tr>
      <tr>
        <th>V5</th>
        <td>{{ v5 }}</td>
      </tr>
    </table> 
  </body>
</html>
